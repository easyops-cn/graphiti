# EasyOps Graphiti 自定义修改

## Table of Contents

- [EasyOps Graphiti 自定义修改](#table-of-contents)
  - [修改概览](./修改概览.md)
  - [1. Knowledge Graph Builder's Principles（实体抽取质量控制）](./1-knowledge-graph-builders-principles实体抽取质量控制.md)
    - [问题背景](./1-knowledge-graph-builders-principles实体抽取质量控制.md#问题背景)
    - [解决方案](./1-knowledge-graph-builders-principles实体抽取质量控制.md#解决方案)
      - [1.1 添加 Knowledge Graph Builder's Principles](./1-knowledge-graph-builders-principles实体抽取质量控制.md#11-添加-knowledge-graph-builders-principles)
      - [1.2 添加 filter_entities 提示词](./1-knowledge-graph-builders-principles实体抽取质量控制.md#12-添加-filterentities-提示词)
      - [1.3 添加 filter_extracted_nodes 函数](./1-knowledge-graph-builders-principles实体抽取质量控制.md#13-添加-filterextractednodes-函数)
      - [1.4 Filter 步骤位置：extract_attributes 之后](./1-knowledge-graph-builders-principles实体抽取质量控制.md#14-filter-步骤位置extractattributes-之后)
    - [效果](./1-knowledge-graph-builders-principles实体抽取质量控制.md#效果)
  - [2. 动态边类型支持](./2-动态边类型支持.md)
    - [问题背景](./2-动态边类型支持.md#问题背景)
    - [具体表现](./2-动态边类型支持.md#具体表现)
    - [修复方案](./2-动态边类型支持.md#修复方案)
      - [2.1 新增函数 ](./2-动态边类型支持.md#21-新增函数)
      - [2.2 修改批量保存逻辑](./2-动态边类型支持.md#22-修改批量保存逻辑)
    - [验证方法](./2-动态边类型支持.md#验证方法)
  - [3. 其他自定义修改](./3-其他自定义修改.md)
    - [3.1 LLM Prompt 增加 reasoning 字段（实体抽取入库）](./3-其他自定义修改.md#31-llm-prompt-增加-reasoning-字段实体抽取入库)
    - [3.2 FalkorDB 字符串转义](./3-其他自定义修改.md#32-falkordb-字符串转义)
    - [3.3 非官方 OpenAI 兼容端点支持](./3-其他自定义修改.md#33-非官方-openai-兼容端点支持)
    - [3.4 严格控制边类型（非 Schema 边类型降级）](./3-其他自定义修改.md#34-严格控制边类型非-schema-边类型降级)
  - [升级注意事项](./升级注意事项.md)
  - [4. Small Model 支持](./4-small-model-支持.md)
    - [问题背景](./4-small-model-支持.md#问题背景)
    - [修改内容](./4-small-model-支持.md#修改内容)
      - [4.1 添加 _get_model_for_size 方法](./4-small-model-支持.md#41-添加-getmodelforsize-方法)
      - [4.2 修改 _generate_response 使用该方法](./4-small-model-支持.md#42-修改-generateresponse-使用该方法)
    - [配置方法](./4-small-model-支持.md#配置方法)
  - [5. 批量去重 LLM 语义去重（Semantic Dedup）](./5-批量去重-llm-语义去重semantic-dedup.md)
    - [问题背景](./5-批量去重-llm-语义去重semantic-dedup.md#问题背景)
    - [解决方案](./5-批量去重-llm-语义去重semantic-dedup.md#解决方案)
      - [5.1 新增辅助函数](./5-批量去重-llm-语义去重semantic-dedup.md#51-新增辅助函数)
      - [5.2 新增主函数](./5-批量去重-llm-语义去重semantic-dedup.md#52-新增主函数)
      - [5.3 调用位置](./5-批量去重-llm-语义去重semantic-dedup.md#53-调用位置)
    - [合并逻辑](./5-批量去重-llm-语义去重semantic-dedup.md#合并逻辑)
    - [日志输出](./5-批量去重-llm-语义去重semantic-dedup.md#日志输出)
    - [效果](./5-批量去重-llm-语义去重semantic-dedup.md#效果)
    - [合并逻辑（_merge_node_into_canonical）](./5-批量去重-llm-语义去重semantic-dedup.md#合并逻辑mergenodeintocanonical)
  - [6. 边去重时合并 Fact（Edge Fact Merging）](./6-边去重时合并-factedge-fact-merging.md)
    - [问题背景](./6-边去重时合并-factedge-fact-merging.md#问题背景)
    - [解决方案](./6-边去重时合并-factedge-fact-merging.md#解决方案)
      - [7.1 添加 merged_fact 字段](./6-边去重时合并-factedge-fact-merging.md#71-添加-mergedfact-字段)
      - [7.2 更新提示词](./6-边去重时合并-factedge-fact-merging.md#72-更新提示词)
      - [7.3 确定性边去重（2025-12-12 优化）](./6-边去重时合并-factedge-fact-merging.md#73-确定性边去重2025-12-12-优化)
      - [7.4 修改合并逻辑](./6-边去重时合并-factedge-fact-merging.md#74-修改合并逻辑)
    - [合并策略](./6-边去重时合并-factedge-fact-merging.md#合并策略)
    - [修改文件清单](./6-边去重时合并-factedge-fact-merging.md#修改文件清单)
  - [7. 实体去重 Reasoning 字段与 Prompt 优化](./7-实体去重-reasoning-字段与-prompt-优化.md)
    - [问题背景](./7-实体去重-reasoning-字段与-prompt-优化.md#问题背景)
    - [解决方案](./7-实体去重-reasoning-字段与-prompt-优化.md#解决方案)
      - [8.1 添加 reasoning 字段](./7-实体去重-reasoning-字段与-prompt-优化.md#81-添加-reasoning-字段)
      - [8.2 更新 Prompt 要求输出 reasoning](./7-实体去重-reasoning-字段与-prompt-优化.md#82-更新-prompt-要求输出-reasoning)
      - [8.3 优化 entity_type_definitions（避免重复）](./7-实体去重-reasoning-字段与-prompt-优化.md#83-优化-entitytypedefinitions避免重复)
      - [8.4 添加日志记录](./7-实体去重-reasoning-字段与-prompt-优化.md#84-添加日志记录)
    - [效果](./7-实体去重-reasoning-字段与-prompt-优化.md#效果)
    - [修改文件清单](./7-实体去重-reasoning-字段与-prompt-优化.md#修改文件清单)
  - [8. 属性抽取枚举验证容错（Attribute Extraction Graceful Handling）](./8-属性抽取枚举验证容错attribute-extraction-graceful-handling.md)
    - [问题背景](./8-属性抽取枚举验证容错attribute-extraction-graceful-handling.md#问题背景)
    - [解决方案](./8-属性抽取枚举验证容错attribute-extraction-graceful-handling.md#解决方案)
    - [效果](./8-属性抽取枚举验证容错attribute-extraction-graceful-handling.md#效果)
    - [修改文件清单](./8-属性抽取枚举验证容错attribute-extraction-graceful-handling.md#修改文件清单)
  - [9. Filter Entities 增加 Schema 上下文（Schema-Aware Filtering）](./9-filter-entities-增加-schema-上下文schema-aware-filtering.md)
    - [问题背景](./9-filter-entities-增加-schema-上下文schema-aware-filtering.md#问题背景)
    - [解决方案](./9-filter-entities-增加-schema-上下文schema-aware-filtering.md#解决方案)
      - [9.1 修改 filter_entities 提示词](./9-filter-entities-增加-schema-上下文schema-aware-filtering.md#91-修改-filterentities-提示词)
      - [9.2 修改 filter_extracted_nodes 函数](./9-filter-entities-增加-schema-上下文schema-aware-filtering.md#92-修改-filterextractednodes-函数)
      - [9.3 修改调用方](./9-filter-entities-增加-schema-上下文schema-aware-filtering.md#93-修改调用方)
    - [决策流程](./9-filter-entities-增加-schema-上下文schema-aware-filtering.md#决策流程)
    - [效果](./9-filter-entities-增加-schema-上下文schema-aware-filtering.md#效果)
    - [修改文件清单](./9-filter-entities-增加-schema-上下文schema-aware-filtering.md#修改文件清单)
  - [10. 批量语义去重性能优化（Semantic Dedup Batch Optimization）- 已回滚](#10-批量语义去重性能优化semantic-dedup-batch-optimization-已回滚)
  - [11. 实体去重 Prompt 强化（Dedupe Prompt Strictness）- 已回滚](#11-实体去重-prompt-强化dedupe-prompt-strictness-已回滚)
  - [12. 去重优先级明确（Deduplication Priority）](./12-去重优先级明确deduplication-priority.md)
    - [问题背景](./12-去重优先级明确deduplication-priority.md#问题背景)
    - [解决方案](./12-去重优先级明确deduplication-priority.md#解决方案)
    - [关键原则](./12-去重优先级明确deduplication-priority.md#关键原则)
    - [修改文件清单](./12-去重优先级明确deduplication-priority.md#修改文件清单)
  - [13. Filter Entities 类型重新验证与重新分类（Type Re-validation and Reclassification）](./13-filter-entities-类型重新验证与重新分类type-re-validation-and-reclassification.md)
    - [问题背景](./13-filter-entities-类型重新验证与重新分类type-re-validation-and-reclassification.md#问题背景)
    - [解决方案](./13-filter-entities-类型重新验证与重新分类type-re-validation-and-reclassification.md#解决方案)
      - [13.1 新增类型重新分类功能](./13-filter-entities-类型重新验证与重新分类type-re-validation-and-reclassification.md#131-新增类型重新分类功能)
      - [13.2 修改 Filter 提示词](./13-filter-entities-类型重新验证与重新分类type-re-validation-and-reclassification.md#132-修改-filter-提示词)
      - [13.3 修改 filter_extracted_nodes 函数](./13-filter-entities-类型重新验证与重新分类type-re-validation-and-reclassification.md#133-修改-filterextractednodes-函数)
      - [13.4 修改调用方处理重新分类](./13-filter-entities-类型重新验证与重新分类type-re-validation-and-reclassification.md#134-修改调用方处理重新分类)
    - [效果](./13-filter-entities-类型重新验证与重新分类type-re-validation-and-reclassification.md#效果)
    - [修改文件清单](./13-filter-entities-类型重新验证与重新分类type-re-validation-and-reclassification.md#修改文件清单)
  - [14. 两步类型验证优化（Two-Step Type Validation）](./14-两步类型验证优化two-step-type-validation.md)
    - [问题背景](./14-两步类型验证优化two-step-type-validation.md#问题背景)
    - [解决方案](./14-两步类型验证优化two-step-type-validation.md#解决方案)
    - [实现细节](./14-两步类型验证优化two-step-type-validation.md#实现细节)
      - [14.1 新增数据模型](./14-两步类型验证优化two-step-type-validation.md#141-新增数据模型)
      - [14.2 提示词函数](./14-两步类型验证优化two-step-type-validation.md#142-提示词函数)
      - [14.3 重写 filter_extracted_nodes](./14-两步类型验证优化two-step-type-validation.md#143-重写-filterextractednodes)
      - [14.4 重新分类后更新 node.reasoning](./14-两步类型验证优化two-step-type-validation.md#144-重新分类后更新-nodereasoning)
    - [性能对比](./14-两步类型验证优化two-step-type-validation.md#性能对比)
    - [效果](./14-两步类型验证优化two-step-type-validation.md#效果)
    - [修改文件清单](./14-两步类型验证优化two-step-type-validation.md#修改文件清单)
  - [15. 重新分类时清理旧类型属性（Attribute Cleanup on Reclassification）](./15-重新分类时清理旧类型属性attribute-cleanup-on-reclassification.md)
    - [问题背景](./15-重新分类时清理旧类型属性attribute-cleanup-on-reclassification.md#问题背景)
    - [解决方案](./15-重新分类时清理旧类型属性attribute-cleanup-on-reclassification.md#解决方案)
    - [清理逻辑](./15-重新分类时清理旧类型属性attribute-cleanup-on-reclassification.md#清理逻辑)
    - [日志输出](./15-重新分类时清理旧类型属性attribute-cleanup-on-reclassification.md#日志输出)
    - [效果](./15-重新分类时清理旧类型属性attribute-cleanup-on-reclassification.md#效果)
    - [修改文件清单](./15-重新分类时清理旧类型属性attribute-cleanup-on-reclassification.md#修改文件清单)
  - [22. 批量保存补充 type_scores 和 type_confidence 字段](./22-批量保存补充-typescores-和-typeconfidence-字段.md)
    - [问题背景](./22-批量保存补充-typescores-和-typeconfidence-字段.md#问题背景)
    - [解决方案](./22-批量保存补充-typescores-和-typeconfidence-字段.md#解决方案)
    - [对比 nodes.py 的 save() 方法](./22-批量保存补充-typescores-和-typeconfidence-字段.md#对比-nodespy-的-save-方法)
    - [修改文件清单](./22-批量保存补充-typescores-和-typeconfidence-字段.md#修改文件清单)
  - [23. 实体类型打分优化 - Top 3 候选 + 二次推理](./23-实体类型打分优化-top-3-候选-二次推理.md)
    - [问题背景](./23-实体类型打分优化-top-3-候选-二次推理.md#问题背景)
    - [解决方案](./23-实体类型打分优化-top-3-候选-二次推理.md#解决方案)
      - [阶段 1：Top 3 候选打分](./23-实体类型打分优化-top-3-候选-二次推理.md#阶段-1top-3-候选打分)
      - [阶段 2：歧义消解（可选）](./23-实体类型打分优化-top-3-候选-二次推理.md#阶段-2歧义消解可选)
    - [处理流程](./23-实体类型打分优化-top-3-候选-二次推理.md#处理流程)
    - [性能优化效果](./23-实体类型打分优化-top-3-候选-二次推理.md#性能优化效果)
    - [阈值配置](./23-实体类型打分优化-top-3-候选-二次推理.md#阈值配置)
    - [第二轮也要打分（2025-12-18 优化）](./23-实体类型打分优化-top-3-候选-二次推理.md#第二轮也要打分2025-12-18-优化)
    - [修改文件清单](./23-实体类型打分优化-top-3-候选-二次推理.md#修改文件清单)
  - [20. 实体去重分批并行处理（LLM 输出截断修复）](./20-实体去重分批并行处理llm-输出截断修复.md)
    - [问题背景](./20-实体去重分批并行处理llm-输出截断修复.md#问题背景)
    - [解决方案](./20-实体去重分批并行处理llm-输出截断修复.md#解决方案)
    - [修改内容](./20-实体去重分批并行处理llm-输出截断修复.md#修改内容)
    - [效果](./20-实体去重分批并行处理llm-输出截断修复.md#效果)
    - [配置参数](./20-实体去重分批并行处理llm-输出截断修复.md#配置参数)
  - [17. RediSearch 反引号转义修复](./17-redisearch-反引号转义修复.md)
    - [问题背景](./17-redisearch-反引号转义修复.md#问题背景)
    - [修改内容](./17-redisearch-反引号转义修复.md#修改内容)
    - [修复效果](./17-redisearch-反引号转义修复.md#修复效果)
  - [24. 实体去重流程优化 - 单轮 LLM 去重（2025-12-18）](./24-实体去重流程优化-单轮-llm-去重2025-12-18.md)
    - [问题背景](./24-实体去重流程优化-单轮-llm-去重2025-12-18.md#问题背景)
    - [解决方案](./24-实体去重流程优化-单轮-llm-去重2025-12-18.md#解决方案)
    - [关键优化点](./24-实体去重流程优化-单轮-llm-去重2025-12-18.md#关键优化点)
    - [性能对比](./24-实体去重流程优化-单轮-llm-去重2025-12-18.md#性能对比)
    - [修改文件清单](./24-实体去重流程优化-单轮-llm-去重2025-12-18.md#修改文件清单)
    - [接口变更](./24-实体去重流程优化-单轮-llm-去重2025-12-18.md#接口变更)
    - [回滚说明（2025-12-18）](./24-实体去重流程优化-单轮-llm-去重2025-12-18.md#回滚说明2025-12-18)
  - [25. 反思环节负向反思功能（Negative Reflexion）](./25-反思环节负向反思功能negative-reflexion.md)
    - [问题背景](./25-反思环节负向反思功能negative-reflexion.md#问题背景)
    - [解决方案](./25-反思环节负向反思功能negative-reflexion.md#解决方案)
      - [25.1 扩展实体反思模型](./25-反思环节负向反思功能negative-reflexion.md#251-扩展实体反思模型)
      - [25.2 扩展边反思模型](./25-反思环节负向反思功能negative-reflexion.md#252-扩展边反思模型)
      - [25.3 更新实体 reflexion 提示词](./25-反思环节负向反思功能negative-reflexion.md#253-更新实体-reflexion-提示词)
      - [25.4 更新边 reflexion 提示词](./25-反思环节负向反思功能negative-reflexion.md#254-更新边-reflexion-提示词)
      - [25.5 修改 node_operations.py 处理负向反思](./25-反思环节负向反思功能negative-reflexion.md#255-修改-nodeoperationspy-处理负向反思)
      - [25.6 修改 edge_operations.py 处理负向反思](./25-反思环节负向反思功能negative-reflexion.md#256-修改-edgeoperationspy-处理负向反思)
    - [关键设计原则](./25-反思环节负向反思功能negative-reflexion.md#关键设计原则)
    - [日志输出](./25-反思环节负向反思功能negative-reflexion.md#日志输出)
    - [修改文件清单](./25-反思环节负向反思功能negative-reflexion.md#修改文件清单)
  - [26. 批量 Summary 提取优化（Batch Summary Extraction）](./26-批量-summary-提取优化batch-summary-extraction.md)
    - [问题背景](./26-批量-summary-提取优化batch-summary-extraction.md#问题背景)
    - [解决方案](./26-批量-summary-提取优化batch-summary-extraction.md#解决方案)
      - [26.1 新增批量提取模型](./26-批量-summary-提取优化batch-summary-extraction.md#261-新增批量提取模型)
      - [26.2 新增批量提取提示词](./26-批量-summary-提取优化batch-summary-extraction.md#262-新增批量提取提示词)
      - [26.3 实现批量提取函数](./26-批量-summary-提取优化batch-summary-extraction.md#263-实现批量提取函数)
      - [26.4 修改 extract_attributes_from_nodes](./26-批量-summary-提取优化batch-summary-extraction.md#264-修改-extractattributesfromnodes)
    - [性能对比](./26-批量-summary-提取优化batch-summary-extraction.md#性能对比)
    - [容错机制](./26-批量-summary-提取优化batch-summary-extraction.md#容错机制)
    - [日志输出](./26-批量-summary-提取优化batch-summary-extraction.md#日志输出)
    - [修改文件清单](./26-批量-summary-提取优化batch-summary-extraction.md#修改文件清单)
  - [两轮 Map-Reduce 语义去重（Semantic Dedup with Map-Reduce）](./两轮-map-reduce-语义去重semantic-dedup-with-map-reduce.md)
    - [问题背景](./两轮-map-reduce-语义去重semantic-dedup-with-map-reduce.md#问题背景)
    - [解决方案](./两轮-map-reduce-语义去重semantic-dedup-with-map-reduce.md#解决方案)
    - [修改后的流程](./两轮-map-reduce-语义去重semantic-dedup-with-map-reduce.md#修改后的流程)
    - [Map-Reduce 设计](./两轮-map-reduce-语义去重semantic-dedup-with-map-reduce.md#map-reduce-设计)
      - [第一轮：Map（分批并行去重）](./两轮-map-reduce-语义去重semantic-dedup-with-map-reduce.md#第一轮map分批并行去重)
      - [第二轮：Reduce（跨批去重）](./两轮-map-reduce-语义去重semantic-dedup-with-map-reduce.md#第二轮reduce跨批去重)
    - [新增函数](./两轮-map-reduce-语义去重semantic-dedup-with-map-reduce.md#新增函数)
    - [冲突处理](./两轮-map-reduce-语义去重semantic-dedup-with-map-reduce.md#冲突处理)
    - [配置参数](./两轮-map-reduce-语义去重semantic-dedup-with-map-reduce.md#配置参数)
    - [修改文件清单](./两轮-map-reduce-语义去重semantic-dedup-with-map-reduce.md#修改文件清单)
  - [实体去重 LLM 调用优化（Dedup LLM Call Optimization）](./实体去重-llm-调用优化dedup-llm-call-optimization.md)
    - [问题背景](./实体去重-llm-调用优化dedup-llm-call-optimization.md#问题背景)
    - [解决方案](./实体去重-llm-调用优化dedup-llm-call-optimization.md#解决方案)
      - [1. 每批独立搜索 DB 候选](./实体去重-llm-调用优化dedup-llm-call-optimization.md#1-每批独立搜索-db-候选)
      - [2. 合并批内去重 + DB 匹配为单次 LLM 调用](./实体去重-llm-调用优化dedup-llm-call-optimization.md#2-合并批内去重-db-匹配为单次-llm-调用)
      - [3. Reduce 阶段简化](./实体去重-llm-调用优化dedup-llm-call-optimization.md#3-reduce-阶段简化)
      - [4. 移除全局 DB 候选收集](./实体去重-llm-调用优化dedup-llm-call-optimization.md#4-移除全局-db-候选收集)
    - [优化效果](./实体去重-llm-调用优化dedup-llm-call-optimization.md#优化效果)
    - [修改文件清单](./实体去重-llm-调用优化dedup-llm-call-optimization.md#修改文件清单)
  - [离线清理脚本（Offline Cleanup Script）](./离线清理脚本offline-cleanup-script.md)
    - [问题背景](./离线清理脚本offline-cleanup-script.md#问题背景)
    - [解决方案](./离线清理脚本offline-cleanup-script.md#解决方案)
    - [使用方法](./离线清理脚本offline-cleanup-script.md#使用方法)
    - [工作流程](./离线清理脚本offline-cleanup-script.md#工作流程)
    - [环境变量](./离线清理脚本offline-cleanup-script.md#环境变量)
    - [注意事项](./离线清理脚本offline-cleanup-script.md#注意事项)
    - [修改文件清单](./离线清理脚本offline-cleanup-script.md#修改文件清单)
  - [27. 批量去重别名匹配修复（Alias-Based Deduplication）](./27-批量去重别名匹配修复alias-based-deduplication.md)
    - [问题背景](./27-批量去重别名匹配修复alias-based-deduplication.md#问题背景)
    - [根因分析](./27-批量去重别名匹配修复alias-based-deduplication.md#根因分析)
    - [解决方案](./27-批量去重别名匹配修复alias-based-deduplication.md#解决方案)
      - [27.1 传递 entity_type_definitions](./27-批量去重别名匹配修复alias-based-deduplication.md#271-传递-entitytypedefinitions)
      - [27.2 添加别名匹配指导](./27-批量去重别名匹配修复alias-based-deduplication.md#272-添加别名匹配指导)
    - [效果](./27-批量去重别名匹配修复alias-based-deduplication.md#效果)
    - [修改文件清单](./27-批量去重别名匹配修复alias-based-deduplication.md#修改文件清单)
  - [28. 实体聚类去重：防止相反操作被错误分组（Cluster Entities Anti-Grouping）](./28-实体聚类去重防止相反操作被错误分组cluster-entities-anti-grouping.md)
    - [问题背景](./28-实体聚类去重防止相反操作被错误分组cluster-entities-anti-grouping.md#问题背景)
    - [解决方案](./28-实体聚类去重防止相反操作被错误分组cluster-entities-anti-grouping.md#解决方案)
    - [效果](./28-实体聚类去重防止相反操作被错误分组cluster-entities-anti-grouping.md#效果)
    - [修改文件清单](./28-实体聚类去重防止相反操作被错误分组cluster-entities-anti-grouping.md#修改文件清单)
  - [29. 双向量 Max Score 策略（Dual-Vector Max Score Strategy）](./29-双向量-max-score-策略dual-vector-max-score-strategy.md)
    - [问题背景](./29-双向量-max-score-策略dual-vector-max-score-strategy.md#问题背景)
    - [解决方案](./29-双向量-max-score-策略dual-vector-max-score-strategy.md#解决方案)
    - [修改详情](./29-双向量-max-score-策略dual-vector-max-score-strategy.md#修改详情)
      - [1. EntityNode 新增 summary_embedding 字段](./29-双向量-max-score-策略dual-vector-max-score-strategy.md#1-entitynode-新增-summaryembedding-字段)
      - [2. node_similarity_search 使用 Max Score](./29-双向量-max-score-策略dual-vector-max-score-strategy.md#2-nodesimilaritysearch-使用-max-score)
      - [3. EntityNode.save() 保存 summary_embedding](./29-双向量-max-score-策略dual-vector-max-score-strategy.md#3-entitynodesave-保存-summaryembedding)
    - [批量更新现有数据](./29-双向量-max-score-策略dual-vector-max-score-strategy.md#批量更新现有数据)
    - [效果验证](./29-双向量-max-score-策略dual-vector-max-score-strategy.md#效果验证)
    - [修改文件清单](./29-双向量-max-score-策略dual-vector-max-score-strategy.md#修改文件清单)
    - [升级注意事项](./29-双向量-max-score-策略dual-vector-max-score-strategy.md#升级注意事项)
  - [30. BFS 遍历所有边类型（BFS Traverse All Edge Types）](./30-bfs-遍历所有边类型bfs-traverse-all-edge-types.md)
    - [问题背景](./30-bfs-遍历所有边类型bfs-traverse-all-edge-types.md#问题背景)
    - [解决方案](./30-bfs-遍历所有边类型bfs-traverse-all-edge-types.md#解决方案)
    - [效果](./30-bfs-遍历所有边类型bfs-traverse-all-edge-types.md#效果)
    - [注意事项](./30-bfs-遍历所有边类型bfs-traverse-all-edge-types.md#注意事项)
    - [修改文件清单](./30-bfs-遍历所有边类型bfs-traverse-all-edge-types.md#修改文件清单)
  - [31. RRF 搜索配置启用 BFS（Enable BFS in RRF Search Config）](./31-rrf-搜索配置启用-bfsenable-bfs-in-rrf-search-config.md)
    - [问题背景](./31-rrf-搜索配置启用-bfsenable-bfs-in-rrf-search-config.md#问题背景)
    - [解决方案](./31-rrf-搜索配置启用-bfsenable-bfs-in-rrf-search-config.md#解决方案)
    - [效果](./31-rrf-搜索配置启用-bfsenable-bfs-in-rrf-search-config.md#效果)
    - [与第 30 章节的关系](./31-rrf-搜索配置启用-bfsenable-bfs-in-rrf-search-config.md#与第-30-章节的关系)
    - [修改文件清单](./31-rrf-搜索配置启用-bfsenable-bfs-in-rrf-search-config.md#修改文件清单)
  - [32. 批量保存补充 summary_embedding 字段（Bulk Save Summary Embedding Fix）](./32-批量保存补充-summaryembedding-字段bulk-save-summary-embedding-fix.md)
    - [问题背景](./32-批量保存补充-summaryembedding-字段bulk-save-summary-embedding-fix.md#问题背景)
    - [解决方案](./32-批量保存补充-summaryembedding-字段bulk-save-summary-embedding-fix.md#解决方案)
    - [对比 nodes.py 的 save() 方法](./32-批量保存补充-summaryembedding-字段bulk-save-summary-embedding-fix.md#对比-nodespy-的-save-方法)
    - [效果](./32-批量保存补充-summaryembedding-字段bulk-save-summary-embedding-fix.md#效果)
    - [修改文件清单](./32-批量保存补充-summaryembedding-字段bulk-save-summary-embedding-fix.md#修改文件清单)
    - [升级注意事项](./32-批量保存补充-summaryembedding-字段bulk-save-summary-embedding-fix.md#升级注意事项)
  - [33. FalkorDB 批量保存避免 embedding 存储为 List（Batch Save Vectorf32 Fix）](./33-falkordb-批量保存避免-embedding-存储为-listbatch-save-vectorf32-fix.md)
    - [问题背景](./33-falkordb-批量保存避免-embedding-存储为-listbatch-save-vectorf32-fix.md#问题背景)
    - [根因分析](./33-falkordb-批量保存避免-embedding-存储为-listbatch-save-vectorf32-fix.md#根因分析)
    - [解决方案](./33-falkordb-批量保存避免-embedding-存储为-listbatch-save-vectorf32-fix.md#解决方案)
    - [效果](./33-falkordb-批量保存避免-embedding-存储为-listbatch-save-vectorf32-fix.md#效果)
    - [验证方法](./33-falkordb-批量保存避免-embedding-存储为-listbatch-save-vectorf32-fix.md#验证方法)
    - [修改文件清单](./33-falkordb-批量保存避免-embedding-存储为-listbatch-save-vectorf32-fix.md#修改文件清单)
    - [升级注意事项](./33-falkordb-批量保存避免-embedding-存储为-listbatch-save-vectorf32-fix.md#升级注意事项)
  - [Cross-encoder Reranking 使用 name+summary（搜索质量修复）](./cross-encoder-reranking-使用-namesummary搜索质量修复.md)
    - [问题背景](./cross-encoder-reranking-使用-namesummary搜索质量修复.md#问题背景)
    - [解决方案](./cross-encoder-reranking-使用-namesummary搜索质量修复.md#解决方案)
    - [效果](./cross-encoder-reranking-使用-namesummary搜索质量修复.md#效果)
    - [修改文件清单](./cross-encoder-reranking-使用-namesummary搜索质量修复.md#修改文件清单)
    - [升级注意事项](./cross-encoder-reranking-使用-namesummary搜索质量修复.md#升级注意事项)
  - [34. 中文/Unicode 实体名称去重修复（Unicode Entity Name Deduplication Fix）](./34-中文unicode-实体名称去重修复unicode-entity-name-deduplication-fix.md)
    - [问题背景](./34-中文unicode-实体名称去重修复unicode-entity-name-deduplication-fix.md#问题背景)
    - [根因分析](./34-中文unicode-实体名称去重修复unicode-entity-name-deduplication-fix.md#根因分析)
    - [解决方案](./34-中文unicode-实体名称去重修复unicode-entity-name-deduplication-fix.md#解决方案)
      - [34.1 修复  支持 Unicode](./34-中文unicode-实体名称去重修复unicode-entity-name-deduplication-fix.md#341-修复-支持-unicode)
      - [34.2 修复  先精确匹配](./34-中文unicode-实体名称去重修复unicode-entity-name-deduplication-fix.md#342-修复-先精确匹配)
    - [效果](./34-中文unicode-实体名称去重修复unicode-entity-name-deduplication-fix.md#效果)
    - [验证方法](./34-中文unicode-实体名称去重修复unicode-entity-name-deduplication-fix.md#验证方法)
    - [修改文件清单](./34-中文unicode-实体名称去重修复unicode-entity-name-deduplication-fix.md#修改文件清单)
    - [升级注意事项](./34-中文unicode-实体名称去重修复unicode-entity-name-deduplication-fix.md#升级注意事项)
  - [35. Episode Content File Storage](./35-episode-content-file-storage.md)
    - [问题背景](./35-episode-content-file-storage.md#问题背景)
    - [解决方案](./35-episode-content-file-storage.md#解决方案)
    - [修改文件清单](./35-episode-content-file-storage.md#修改文件清单)
  - [36. EntityEdge.get_by_uuid() 支持自定义边类型](./36-entity-edge-get-by-uuid-支持自定义边类型.md)
    - [问题背景](./36-entity-edge-get-by-uuid-支持自定义边类型.md#问题背景)
    - [影响范围](./36-entity-edge-get-by-uuid-支持自定义边类型.md#影响范围)
    - [修改内容](./36-entity-edge-get-by-uuid-支持自定义边类型.md#修改内容)
    - [升级注意事项](./36-entity-edge-get-by-uuid-支持自定义边类型.md#升级注意事项)
